<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>How to load data in motherduck • md</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="How to load data in motherduck">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">md</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/How-to-load-data-in-motherduck.html">How to load data in motherduck</a></li>
    <li><a class="dropdown-item" href="../articles/How-to-manage-settings-and-extensions.html">How to manage settings and extensions</a></li>
    <li><a class="dropdown-item" href="../articles/How-to-manage-users-tokens-and-service-accounts.html">How to manage users, tokens and service accounts</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>How to load data in motherduck</h1>
            
      

      <div class="d-none name"><code>How-to-load-data-in-motherduck.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://alejandrohagan.github.io/md/">md</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="create-a-database">Create a database<a class="anchor" aria-label="anchor" href="#create-a-database"></a>
</h2>
<p>Later on we will show examples of how to read data from a source
file, eg. csv, parquet, excel, or even a different database, directly
into duckdb but for now let’s assume its some data that you already have
loaded.</p>
<p>Before we get into that lets review quickly the three things you need
to load data into a database: - database name - This is object that will
hold your schemas, tables, functions, roles, permissions, etc - somtimes
this may be called a catalog - schema name - This of this as fancy name
to classify and organize your tables, functions, procedures, etc - By
default, duckdb will use “main” as a schema name - table or view name -
This is the name of the actual table or view that holds your data</p>
<p>To save or reference data, you need to fully qualify with
<code>database_name.schema_name.table_name</code></p>
<p>If you uploaded data without creating a table or schema first then
duckdb will assign “temp” and “main” as the default names for your
database and schema respectively.</p>
<p>The quickest and easiest way to get data into duckdb is either
use:</p>
<ul>
<li>duckdb::register_duckdb()</li>
<li>md::create_or_replace_database()</li>
</ul>
<p>The different is create_or_replace_database() gives you more control
on the database name and schema name</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diamonds_tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">diamonds</span><span class="op">)</span> <span class="co">#&lt;1&gt;</span></span>
<span></span>
<span><span class="va">con_tmp</span> <span class="op">&lt;-</span> <span class="fu">create_local_temp_db</span><span class="op">(</span><span class="op">)</span> <span class="co">#&lt;2&gt;</span></span>
<span></span>
<span><span class="va">diamonds_tbl</span> <span class="op">|&gt;</span>  <span class="co">#&lt;3&gt;</span></span>
<span>    <span class="fu">md</span><span class="fu">::</span><span class="fu"><a href="../reference/create_or_replace_database.html">create_or_replace_database</a></span><span class="op">(</span> <span class="co">#&lt;4&gt;</span></span>
<span>        .con <span class="op">=</span> <span class="va">con_tmp</span> <span class="co">#&lt;5&gt;</span></span>
<span>        ,database_name <span class="op">=</span> <span class="st">"temp"</span> <span class="co">#&lt;6&gt;</span></span>
<span>        ,schema_name <span class="op">=</span> <span class="st">"main"</span> <span class="co">#&lt;7&gt;</span></span>
<span>        ,table_name <span class="op">=</span> <span class="st">"diamonds"</span> <span class="co">#&lt;8&gt;</span></span>
<span>        ,overwrite<span class="op">=</span><span class="cn">FALSE</span>  <span class="co">#&lt;9&gt;</span></span>
<span>        <span class="op">)</span></span></code></pre></div>
<p>Notice that we don’t assing this object to anything, this just
silently writes our data to our database, to validate the data is in our
dtabase, we can do the following:</p>
<p>DBI::xxxx</p>
<p>MD::list_tables()</p>
<p>After running these functions, we can see our table - ready for us to
query it.</p>
<p>to query, you can simply leverage dplyr::tbl() function to pull it
and from there leverage the fantastic dbplyr package to use tidy verbs
to perform additional functions</p>
<p>Let’s say we want to filter and summarize this table and save it to a
new schema with a new name – no problem, we can repeat the steps above
this time with a new schema and reference name.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">duckdb</span><span class="fu">::</span><span class="fu"><a href="https://r.duckdb.org/reference/duckdb_register.html" class="external-link">duckdb_register</a></span><span class="op">(</span><span class="va">con_tmp</span>,name <span class="op">=</span> <span class="st">"diamonds"</span>,<span class="va">diamonds_tbl</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">tbl</span><span class="op">(</span><span class="va">con_tmp</span>,<span class="st">"diamonds"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">tbl</span><span class="op">(</span><span class="va">con_tmp</span>,<span class="fu">sql</span><span class="op">(</span><span class="st">"select * from file1dbc839ef04b6.raw.diamonds"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbGetQuery.html" class="external-link">dbGetQuery</a></span><span class="op">(</span><span class="va">con_tmp</span>,<span class="st">"select * from file1dbc839ef04b6.raw.diamonds"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu">create_or_replace_schema</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu">create_or_replace_table</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>What if we want to delete or move a database, schema or table?</p>
<p>Now that the basics are covered, let us explore</p>
</div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Alejandro Hagan.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
